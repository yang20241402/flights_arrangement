# 项目整合说明

## 整合内容

本项目整合了三个独立的Qt项目模块：

### 1. 文件夹1 -> login/ (登录模块)
**原始文件：**
- widget.cpp/h/ui - 登录主界面
- mainwindow.cpp/h/ui - 主窗口
- form.cpp/h/ui - 注册表单
- formpwd.cpp/h/ui - 密码找回
- ClickableLabel.cpp/h - 自定义可点击标签
- new_resources.qrc - 资源文件
- newimages/ - 图片资源

**功能：**
- 用户登录验证
- 新用户注册
- 密码找回功能
- 浅色主题UI设计

### 2. flightdetail/ -> flight/ (航班查询模块)
**原始文件：**
- flightquerywidget.cpp/h/ui - 航班查询界面
- flightdetailwidget.cpp/h/ui - 航班详情界面

**功能：**
- 航班信息查询
- 航班详细信息展示
- 数据库查询功能

### 3. PersonCenter/ -> person/ (个人中心模块)
**原始文件：**
- mainwindow.cpp/h/ui -> personcenterwindow.cpp/h/ui (已重命名)
- myorderdialog.cpp/h/ui - 我的订单
- passengerdialog.cpp/h/ui - 常用旅客
- pointsdialog.cpp/h/ui - 积分管理
- avatar.png - 头像图片

**功能：**
- 订单管理
- 旅客信息管理
- 积分查询

## 主要修改

### 1. 文件重命名
- `PersonCenter/mainwindow.*` → `person/personcenterwindow.*`
  - 原因：避免与登录模块的mainwindow冲突
  - 修改内容：类名从MainWindow改为PersonCenterWindow

### 2. 项目结构调整
```
原始结构:
1/
flightdetail/
PersonCenter/

整合后结构:
IntegratedFlightSystem/
├── login/      (来自1/)
├── flight/     (来自flightdetail/)
├── person/     (来自PersonCenter/)
└── resources/  (整合所有资源)
```

### 3. 配置文件
- 创建统一的 `IntegratedFlightSystem.pro` (qmake)
- 创建统一的 `CMakeLists.txt` (cmake)
- 整合所有源文件、头文件、UI文件

### 4. 资源文件整合
- 图片资源统一放在 `resources/images/`
- 资源配置文件：`resources/resources.qrc`
- 头像文件：`resources/avatar.png`

### 5. 头文件引用修正
- `flightquerywidget.h`: 修正了FlightDetailWidget.h的大小写

## 编译配置

### Qt模块依赖
- Qt Core
- Qt Widgets
- Qt SQL
- Qt Network

### 外部库依赖
- ODBC (Windows: odbc32.lib)

### 包含路径
```qmake
INCLUDEPATH += login flight person
```

## 使用建议

### 1. 模块间集成
各模块目前相对独立，如需集成：
- 在登录成功后跳转到主窗口
- 主窗口可以打开航班查询和个人中心
- 传递用户ID在各模块间共享用户信息

### 2. 数据库配置
确保三个模块使用相同的数据库连接配置：
```cpp
QSqlDatabase db = QSqlDatabase::addDatabase("QODBC");
db.setDatabaseName("flight_db");
db.setUserName("root");
db.setPassword("your_password");
```

### 3. 进一步优化建议
- 创建统一的数据库管理类
- 实现用户会话管理
- 添加模块间的导航功能
- 统一错误处理机制
- 添加日志记录功能

## 注意事项

1. **数据库连接**：各模块需要配置相同的数据库连接参数
2. **资源路径**：确保qrc文件中的路径正确
3. **UI文件**：修改UI后需要重新运行qmake
4. **类名冲突**：已解决MainWindow冲突，如有其他冲突需要重命名
5. **编译顺序**：建议先清理构建目录，再重新编译

## 测试建议

1. 测试登录模块的所有功能
2. 测试航班查询和详情显示
3. 测试个人中心的各个对话框
4. 测试数据库连接和查询
5. 测试资源文件加载

## 后续开发

可以考虑添加：
- 统一的主窗口框架
- 模块间的导航菜单
- 用户权限管理
- 数据缓存机制
- 国际化支持
- 单元测试
